<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
      <!-- Added Favicon which is the tiny picture in tab -->
      <link rel="shortcut icon" href="https://s3-us-west-2.amazonaws.com/asset.plexuss.com/college/logos/University_of_Colorado_Denver.png"/>
      <title>WebSocket-Lite</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>

  <body>
    <div>
      <form id = "roomForm">
        <label for="roomInput" class="form-label">Enter Code:</label>
        <input class="form-control" type="text" placeholder="#..." id="roomInput">
        <input class="form-control" type="text" placeholder="#..." id="roomMessage">
        <button class="btn btn-primary">Join</button>
      </form>
    </div>
    <div id = "messageSpot"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      // this initializes the websocket
      var socket = io();

      let roomForm = document.getElementById('roomForm');

      //this event listener will listen for any submit events. Then when an even happens it will get values from input feilds 
      roomForm.addEventListener('submit', function(e) {
      e.preventDefault();
      if(roomInput.value)
          {
              socket.emit('room num', roomInput.value, roomMessage.value);
              roomInput.value = '';
              roomMessage.value = '';
          }
      });
      //this will take broadcasted information from the websocket server and apply it to the applicable websockets
      socket.on('chat message', function(contents) {
      for(const msg of contents)
      {
        var item = document.createElement('p');
        item.textContent = msg;
        document.getElementById('messageSpot').appendChild(item);
        window.scrollTo(0, document.body.scrollHeight);
      }
      });
    </script>
  </body>
</html>